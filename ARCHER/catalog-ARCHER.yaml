plugins:
  source:
    - module: intake_xarray

sources:
  DFS5.2:
    description: Drakkar Forcing Set version 5.2
    metadata:
      catalog_entry_author: Mattia Almansi
    driver: netcdf
    parameters:
      year:
        description: year
        type: int
        default: 1958
        min: 1958
        max: 2015
      time_freq:
        description: "time frequency (3H: 3-hour, D: daily)"
        type: str
        default: 3H
        allowed: [3H, D]
    args:
      urlpath:
        - /work/n01/n01/acc/DFS/DFS5.2/{{ year }}/drowned_{{'q2' if time_freq=='3H' else 'radsw'}}_DFS5.2_y{{ year }}.nc
        - /work/n01/n01/acc/DFS/DFS5.2/{{ year }}/drowned_{{'v10' if time_freq=='3H' else 'radlw'}}_DFS5.2_y{{ year }}.nc
        - /work/n01/n01/acc/DFS/DFS5.2/{{ year }}/drowned_{{'u10' if time_freq=='3H' else 'precip'}}_DFS5.2_y{{ year }}.nc
        - /work/n01/n01/acc/DFS/DFS5.2/{{ year }}/drowned_{{'t2' if time_freq=='3H' else 'snow'}}_DFS5.2_y{{ year }}.nc
      xarray_kwargs:
          parallel: True
          combine: by_coords
